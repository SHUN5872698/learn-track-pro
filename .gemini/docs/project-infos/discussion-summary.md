# これまでの議論の要点まとめ（最新版：2025年12月2日更新）

## 背景・経緯

### プロジェクトの概要

- **プロジェクト名**: LearnTrack Pro - プログラミング学習管理プラットフォーム
- **技術スタック**: Laravel 12 / Vue 3 (Composition API) / Pinia / MySQL 8.0
- **構成**: モノリシックSPA
- **現在の状態**: Phase 3完了、HTTPS本番稼働中 → Phase 4（理解度チェックとドキュメント整理）実施中

### 目的・目標

- 転職活動用ポートフォリオとして公開
- 実装内容を面接で説明できるレベルまで理解を深める
- アプリケーション全体の理解度を体系化し、面接対策資料として整備

### 主要な制約

- TypeScript不使用、Bootstrap/jQuery/Options API禁止
- 個人開発のため実装工数を最小限に
- デプロイ優先、完璧主義を避ける
- **予算制約**: 月1,000-3,000円（転職活動期間3-6ヶ月）
- **Git管理対象**: `laravel-docker/src/`のみ（インフラ設定は対象外）
- **転職活動タイムライン**: 2026年1月〜3月が書類選考・面接期間

---

## 完了・確定事項

### プロジェクトの現在地

- ✅ Phase 0-3: アプリケーション開発・VPS環境構築・SSL化完了（10/14-11/10）
- ✅ Phase 4-1: Backend理解度チェック完了（11/16-18）
- ✅ Phase 4-2: Frontend理解度チェック完了（11/19-26）
- ✅ Phase 4-3: 統合理解と説明練習完了（面接想定質問リスト作成・回答記入完了）
- ✅ Phase 4-4: APIテスト環境整備完了（Apidog動的値設定・ドキュメント整備）

### 直近完了した実装（12/2）

1. ✅ Apidog環境変数の動的値自動設定（Post-processorスクリプト一式）
2. ✅ API設計ドキュメントの包括的ドキュメント化
3. ✅ セクション一括更新用の動的ID管理（section_id_1〜3）
4. ✅ 全API仕様ドキュメントへのリンク整備

### 作成済みドキュメント

- 環境構築メモ①〜⑧、本番環境構築手順書
- アプリケーションロジック理解度チェック（全6機能）
- API設計（包括的ドキュメント）、各API仕様書（認証、マスターデータ、学習内容、セクション、学習記録、レポート）
- コメント記述基準（改訂版）
- セクション一括更新のバリデーション改善案

---

## これまでの議論で確定した方針

### 1. 理解度チェックドキュメントの形式統一

**要点**: 質問→回答→私の理解（5項目の箇条書き）の3段階構成

**判断基準**: 面接時の素早い参照、冗長な説明を排除し核心のみ記載

### 2. AI協業における責任と品質保証

**要点**: 最終的な責任はエンジニア自身が負う

**判断基準**: 実務では説明責任・予測可能性・再現性が必須

### 3. AI駆動開発の理解レベルの定義

**Level 1（現状）**: AIの提案を評価・判断できる、MVP開発では十分

**Level 2（目標）**: 自力で実装できる、保守・改善フェーズで必要

**判断基準**: MVP完成までLevel 1で進め、保守・改善段階でLevel 2を目指す

### 4. コメント記述基準

**Why重視**: 実装の理由や判断基準を優先的に記載、Whatは必要最小限

**過剰削除の防止**: AI協業での失敗経験から、重要なコメントを削除しない具体例を明示

### 5. Git戦略の環境別ファイル保護

**要点**: .gitattributes でconfig/cors.php merge=ours、.gitignore merge=ours

**判断基準**: ローカルとVPSで設定が異なるファイルはマージ戦略で保護

詳細: 環境構築メモ⑥参照

### 6. 安全なコマンドの自動化

**要点**: `git diff`, `git status`, `cat` 等の読み取り系コマンドは承認なしで実行

**判断基準**: 承認待ちの時間を削減し、開発テンポを向上させるため

### 7. Apidog動的値管理の方針

**要点**: 作成系APIのPost-processorで環境変数を自動設定、削除系で初期化

**判断基準**: 手動でのID管理を排除し、テストの再現性と効率を向上させるため

**運用ルール**: セクション一括更新前は必ず学習内容詳細取得を実行（section_id_1〜3の取得）

詳細: API設計ドキュメント参照

---

## やってはいけないこと

1. SSHパスワード認証を有効化
2. rootで直接ログイン許可
3. socket activation有効でポート変更
4. fail2banなしでSSH開放
5. MySQLのDocker化
6. mainでローカル用設定をコミット
7. AI生成コードをレビューせず本番適用
8. 破壊的コマンド（pull, merge, commit等）を承認なしで自動実行

---

## 技術選択と教訓

### 重要な技術選択の判断

1. **Xserver VPS選択**: AWS断念（コスト5倍） → 予算内実現最優先
2. **ハイブリッド構成**: Laravel Docker化 + MySQL直接 → メモリ2GB環境での安定性
3. **Apidog動的値管理**: 環境変数 + Post-processor → テストの再現性確保

### 重要な教訓

1. **Permission deniedは時限爆弾**: git clone時に予防的設定すべき
2. **AI協業の責任所在**: 自身が理解し最終責任を負う
3. **非同期処理の落とし穴**: pm.sendRequestは非同期のため、Pre-processorでの値設定に使えない

---

## 次のアクション

### Phase 4-5: プロフィール画像アップロード機能実装（優先度: 中）

**工数**: 1-2日

**作業内容**: フロントエンド画像選択UI、バックエンド処理、動作確認

### Phase 4-6: Service層リファクタリング検討（優先度: 低）

**工数**: 2-3日

**作業内容**: bulkUpdate()とstore()のService層切り出し

### Phase 4-7: CI/CD構築（優先度: 低）

**工数**: 2-3日

**作業内容**: GitHub Actionsによる自動テスト・デプロイパイプライン構築

---

## 特記事項

### プロジェクト健全性

- **進捗**: 優良（Phase 4-4完了、APIテスト環境整備済み）
- **技術的負債**: 最小限（Service層未分離、バリデーション改善の余地あり）
- **ドキュメント**: 優良（全手順記録済み、API設計ドキュメント包括化完了）
- **セキュリティ**: 優良（SSL/TLS、SSH多層防御、fail2ban）

### 現在の状態

**本番環境**: 完全稼働中

**次の焦点**: プロフィール画像アップロード機能実装 → Service層リファクタリング

**発見した課題**: セクション一括更新のバリデーション不足、Service層未分離 → 改善案記録済み

### デプロイまでのクリティカルパス

**完了**: SSL化・ドメイン設定完了により本番公開済み

**残作業**: 追加機能実装（任意）、CI/CD自動化（任意）

---

**最終更新**: 2025年12月2日
