# これまでの議論の要点まとめ（最新版：2025年12月6日更新）

## 背景・経緯

### プロジェクトの概要

- **プロジェクト名**: LearnTrack Pro - プログラミング学習管理プラットフォーム
- **技術スタック**: Laravel 12 / Vue 3 (Composition API) / Pinia / MySQL 8.0
- **構成**: モノリシックSPA
- **現在の状態**: Phase 4完了、ドキュメント検証ワークフロー整備完了

### 目的・目標

- 転職活動用ポートフォリオとして公開
- 実装内容を面接で説明できるレベルまで理解を深める
- アプリケーション全体の理解度を体系化し、面接対策資料として整備

### 主要な制約

- TypeScript不使用、Bootstrap/jQuery/Options API禁止
- 個人開発のため実装工数を最小限に
- デプロイ優先、完璧主義を避ける
- **予算制約**: 月1,000-3,000円（転職活動期間3-6ヶ月）
- **Git管理対象**: `laravel-docker/src/`のみ（インフラ設定は対象外）
- **転職活動タイムライン**: 2026年1月〜3月が書類選考・面接期間

---

## 完了・確定事項

### プロジェクトの現在地

- ✅ Phase 0-3: アプリケーション開発・VPS環境構築・SSL化完了
- ✅ Phase 4-1〜4-4: 理解度チェック・APIテスト環境整備完了
- ✅ ドキュメント検証ワークフロー整備完了（workflow:verify-docs）
- ✅ 全カテゴリのドキュメント検証実施完了

### 直近完了した実装（12/6）

1. ✅ `workflow:verify-docs` プロンプト・ワークフロー作成
2. ✅ 全12カテゴリのドキュメント検証実施
3. ✅ 検証レポート出力（`.gemini/outputs/verify/`）
4. ✅ ドキュメント課題のIssue化

### 作成済みドキュメント

- 環境構築メモ①〜⑧、本番環境構築手順書
- アプリケーションロジック理解度チェック（全6機能）
- API設計（包括的ドキュメント）、各API仕様書
- コメント記述基準（改訂版）
- **ドキュメント検証プロンプト** ([`verify-docs-prompt.md`](http://verify-docs-prompt.md))

---

## これまでの議論で確定した方針

### 1. [GEMINI.md](http://GEMINI.md)を絶対情報源とする

**要点**: バージョン情報、技術スタック、[参照ドキュメント等はGEMINI.md](http://参照ドキュメント等はGEMINI.md)を正とする

**判断基準**: composer.json等を直接参照せず、検証ロジックをシンプルに保つ

### 2. ドキュメント検証はカテゴリ別に段階実行

**要点**: 一括チェックではなく、1カテゴリずつ精査し報告ファイルに追記

**判断基準**: 精度向上、コンテキスト分離、GeminiCLIの文脈保持のため

### 3. 検証レポートはファイル出力でコンテキスト分離

**要点**: `.gemini/outputs/verify/<カテゴリ>.md`に追記、AIの記憶に依存しない

**判断基準**: 途中経過の可視化、再開可能性、抜け漏れ防止

### 4. 検証レポートのコミットタイプはchore

**要点**: ツール出力・生成物は`docs`ではなく`chore`

**判断基準**: 手動執筆ドキュメントと区別、開発プロセス上の生成物として扱う

### 5. Issue紐づけは「Fixes #XX」形式

**要点**: GitHubの自動クローズにはキーワード形式が必須

**判断基準**: 「Issue #XXに対応」では自動クローズされない

### 6. wontfixラベルで「対応しない判断」を記録

**要点**: やらない理由を明示してIssue登録、将来の判断材料として保持

**判断基準**: セキュリティ情報のGitHub公開懸念など、判断の記録として価値あり

### 7. AI協業における責任と品質保証

**要点**: 最終的な責任はエンジニア自身が負う

**判断基準**: 実務では説明責任・予測可能性・再現性が必須

### 8. Git戦略の環境別ファイル保護

**要点**: .gitattributes でconfig/cors.php merge=ours、.gitignore merge=ours

**判断基準**: ローカルとVPSで設定が異なるファイルはマージ戦略で保護

詳細: 環境構築メモ⑥参照

---

## やってはいけないこと

1. SSHパスワード認証を有効化
2. rootで直接ログイン許可
3. socket activation有効でポート変更
4. fail2banなしでSSH開放
5. MySQLのDocker化
6. mainでローカル用設定をコミット
7. AI生成コードをレビューせず本番適用
8. 破壊的コマンドを承認なしで自動実行

---

## 技術選択と教訓

### 重要な技術選択の判断

1. **Xserver VPS選択**: AWS断念（コスト5倍） → 予算内実現最優先
2. **ハイブリッド構成**: Laravel Docker化 + MySQL直接 → メモリ2GB環境での安定性
3. [**GEMINI.md](http://GEMINI.md)中心の検証設計**: 単一情報源で検証ロジックをシンプルに

### 重要な教訓

1. **セキュリティ情報のGitHub公開は慎重に**: 転職時に「認識が低い」と思われるリスク
2. **検証レポートは更新より削除**: 改善完了後はIssueクローズで追跡、レポート更新は労力と見合わない
3. **カテゴリ分類は作成時に確認**: securitiesに開発リスク管理ドキュメントを配置するミスが発生

---

## 次のアクション

### Phase 4-5: ドキュメント改善（優先度: 高）

**工数**: 0.5日

**作業内容**: 二重拡張子ファイル削除、カテゴリ分類ミス修正、Issue紐づけコミット

### Phase 4-6: プロフィール画像アップロード機能実装（優先度: 中）

**工数**: 1-2日

**作業内容**: フロントエンド画像選択UI、バックエンド処理、動作確認

### Phase 4-7: Service層リファクタリング（優先度: 中）

**工数**: 2-3日

**作業内容**: LearningSessionController規約違反修正、bulkUpdate()とstore()のService層切り出し

### Phase 4-8: CI/CD構築（優先度: 低）

**工数**: 2-3日

**作業内容**: GitHub Actionsによる自動テスト・デプロイパイプライン構築

---

## 特記事項

### プロジェクト健全性

- **進捗**: 優良（ドキュメント検証ワークフロー整備完了）
- **技術的負債**: 軽微（Service層未分離、コーディング規約違反あり）
- **ドキュメント**: 良好（検証により課題特定済み、改善予定）
- **セキュリティ**: 優良（SSL/TLS、SSH多層防御、fail2ban）

### 検証で発見された課題

- **cookbooks/**: ディレクトリ不存在
- **infrastructures/**: ドキュメント欠落（wontfixでIssue登録済み）
- **development-processes/**: LearningSessionController規約違反
- **project-infos/**: 二重拡張子ファイル
- **securities/**: カテゴリ分類ミス

### デプロイまでのクリティカルパス

**完了**: SSL化・ドメイン設定完了により本番公開済み

**残作業**: ドキュメント改善 → 追加機能実装（任意）

---

**最終更新**: 2025年12月6日
