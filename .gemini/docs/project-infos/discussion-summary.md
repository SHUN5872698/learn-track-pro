# これまでの議論の要点まとめ（最新版：2025年11月26日更新）

## 背景・経緯

### プロジェクトの概要

- **プロジェクト名**: LearnTrack Pro - プログラミング学習管理プラットフォーム
- **技術スタック**: Laravel 12 / Vue 3 (Composition API) / Pinia / MySQL 8.0
- **構成**: モノリシックSPA
- **現在の状態**: Phase 3完了、HTTPS本番稼働中 → Phase 4（理解度チェックとドキュメント整理）実施中

### 目的・目標

- 転職活動用ポートフォリオとして公開
- 実装内容を面接で説明できるレベルまで理解を深める
- アプリケーション全体の理解度を体系化し、面接対策資料として整備

### 主要な制約

- TypeScript不使用、Bootstrap/jQuery/Options API禁止
- 個人開発のため実装工数を最小限に
- デプロイ優先、完璧主義を避ける
- **予算制約**: 月1,000-3,000円（転職活動期間3-6ヶ月）
- **Git管理対象**: `laravel-docker/src/`のみ（インフラ設定は対象外）
- **転職活動タイムライン**: 2026年1月〜3月が書類選考・面接期間

---

## 完了・確定事項

### プロジェクトの現在地

- ✅ Phase 0-3: アプリケーション開発・VPS環境構築・SSL化完了（10/14-11/10）
- ✅ Phase 4-1: Backend理解度チェック完了（11/16-18）
- ✅ Phase 4-2: Frontend理解度チェック完了（11/19-26）
- 🔄 Phase 4-3: 統合理解と説明練習進行中（面接想定質問リスト作成完了）

### 直近完了した実装（11/26）

1. ✅ 学習セッションロジック（Backend）の理解度チェックと文書整理（05-learning-session-logic.md）
2. ✅ 学習セッションロジック（Frontend）の理解度チェックと文書整理（05-learning-session-logic.md）
3. ✅ 面接想定質問リストの作成（人間味のある対話形式へのリライト完了）
4. ✅ コメント記述基準のワークフロー改善と適用
5. ✅ 安全なコマンドの自動実行スクリプト導入

### 作成済みドキュメント

- 環境構築メモ①〜⑧、本番環境構築手順書
- アプリケーションロジック理解度チェック（マスターデータ、学習内容管理、学習セッション管理）
- コメント記述基準（改訂版）
- セクション一括更新のバリデーション改善案
- safe-commands.sh（開発支援ツール）

---

## これまでの議論で確定した方針

### 1. 理解度チェックドキュメントの形式統一

**要点**: 質問→回答→私の理解（5項目の箇条書き）の3段階構成

**判断基準**: 面接時の素早い参照、冗長な説明を排除し核心のみ記載

### 2. AI協業における責任と品質保証

**要点**: 最終的な責任はエンジニア自身が負う

**判断基準**: 実務では説明責任・予測可能性・再現性が必須

**見積もり反映**: 理解とレビューの時間を見積もりに含める

**成功要因の認識**: 適切なコンテキスト提供で実装成功、ただしService層の切り分けなど深いチェックが不足

### 3. AI駆動開発の理解レベルの定義

**Level 1（現状）**: AIの提案を評価・判断できる、MVP開発では十分

**Level 2（目標）**: 自力で実装できる、保守・改善フェーズで必要

**判断基準**: MVP完成までLevel 1で進め、保守・改善段階でLevel 2を目指す

**課題認識**: 試行錯誤の経験不足により「なぜこう書くのか」が腹落ちしていない、時間制約により基礎学習は後回し

### 4. コメント記述基準

**Why重視**: 実装の理由や判断基準を優先的に記載、Whatは必要最小限

**過剰削除の防止**: AI協業での失敗経験から、重要なコメントを削除しない具体例を明示

**Vue特有のグループ化**: State管理、算出プロパティ、ライフサイクル等のラベルを追加

**接頭辞**: リーダブルコード準拠のみ採用（TODO/FIXME/HACK/XXX/NOTE）

### 5. Git戦略の環境別ファイル保護

**要点**: .gitattributes でconfig/cors.php merge=ours、.gitignore merge=ours

**判断基準**: ローカルとVPSで設定が異なるファイルはマージ戦略で保護

詳細: 環境構築メモ⑥参照

### 6. 安全なコマンドの自動化

**要点**: `git diff`, `git status`, `cat` 等の読み取り系コマンドは承認なしで実行

**判断基準**: 承認待ちの時間を削減し、開発テンポを向上させるため

---

## やってはいけないこと

1. SSHパスワード認証を有効化
2. rootで直接ログイン許可
3. socket activation有効でポート変更
4. fail2banなしでSSH開放
5. MySQLのDocker化
6. バックアップ復旧時にDB削除・再作成
7. mainでローカル用設定をコミット
8. .gitattributesなしで環境別ファイル管理
9. docker-compose.ymlにimage指定とbuild指定を併記
10. BuildKitキャッシュを放置
11. git clone後にstorage/権限設定をしない
12. IPアドレスアクセスをリダイレクトせず放置
13. 詳細ドキュメントを子ページ化
14. 実際の構築時間を架空の「理想的な所要時間」で記載
15. プロフィール画像用ディレクトリの権限設定を省略
16. AI生成コードをレビューせず本番適用
17. Service層の切り分けなど深いレベルのアーキテクチャチェックを省略
18. 破壊的コマンド（pull, merge, commit等）を承認なしで自動実行

---

## 技術選択と教訓

### 重要な技術選択の判断

1. **Xserver VPS選択**: AWS断念（コスト5倍） → 予算内実現最優先
2. **ハイブリッド構成**: Laravel Docker化 + MySQL直接 → メモリ2GB環境での安定性
3. **理解度チェック形式の統一**: 質問→回答→理解の3段階構成 → 面接時の素早い参照

### 重要な教訓

1. **Permission deniedは時限爆弾**: git clone時に予防的設定すべき
2. **環境差異の最小化**: ローカルとVPSで権限設定を統一
3. **AI協業の責任所在**: 自身が理解し最終責任を負う
4. **深いレベルのチェックの重要性**: アーキテクチャレベル（Service層の切り分け等）のチェックが必須
5. **見積もりへの反映**: AI支援での実装時間だけでなく、理解とレビューの時間を含める
6. **試行錯誤の経験不足の自覚**: AI駆動開発では「なぜこう書くのか」が腹落ちしにくい、時間制約により基礎学習は後回し

---

## 次のアクション

### Phase 4-3: 統合理解と説明練習（優先度: 最高）

**工数**: 1-2日

**作業内容**: 作成した面接想定質問リストへの回答記入、模擬面接練習

### Phase 4-4: プロフィール画像アップロード機能実装（優先度: 中）

**工数**: 1-2日

**作業内容**: フロントエンド画像選択UI、バックエンド処理、動作確認

### Phase 4-5: Service層リファクタリング検討（優先度: 低）

**工数**: 2-3日

**作業内容**: bulkUpdate()とstore()のService層切り出し

### Phase 4-6: CI/CD構築（優先度: 低）

**工数**: 2-3日

**作業内容**: GitHub Actionsによる自動テスト・デプロイパイプライン構築

---

## 特記事項

### プロジェクト健全性

- **進捗**: 優良（Phase 3完了、HTTPS本番稼働中、Phase 4-2完了）
- **技術的負債**: 最小限（Service層未分離、バリデーション改善の余地あり）
- **ドキュメント**: 優良（全手順記録済み、理解度チェック形式統一、面接対策資料充実）
- **セキュリティ**: 優良（SSL/TLS、SSH多層防御、fail2ban）

### 現在の状態

**本番環境**: 完全稼働中

**次の焦点**: 統合理解と説明練習（回答記入） → プロフィール画像アップロード機能実装

**発見した課題**: セクション一括更新のバリデーション不足、Service層未分離、AI駆動開発での基礎理解の浅さ → 改善案記録済み、サービス展開時またはリファクタリング時に対応予定

**AI駆動開発の現状**: Level 1（提案を評価・判断）は達成、Level 2（自力実装）は時間制約により後回し、MVP完成後に段階的に取り組む方針

### デプロイまでのクリティカルパス

**完了**: SSL化・ドメイン設定完了により本番公開済み

**残作業**: 追加機能実装（任意）、理解度チェック完了（面接対策）、CI/CD自動化（任意）

---

**最終更新**: 2025年11月26日
