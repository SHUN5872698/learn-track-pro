# これまでの議論の要点まとめ（最新版：2026年1月15日更新）

## 背景・経緯

### プロジェクトの概要

- **プロジェクト名**: LearnTrack Pro - プログラミング学習管理プラットフォーム
- **技術スタック**: Laravel 12 / Vue 3 (Composition API) / Pinia / MySQL 8.0
- **構成**: モノリシックSPA
- **現在の状態**: CI/CD学習完了、GitHub Actions実装準備段階

### 目的・目標

- 転職活動用ポートフォリオとして公開
- プロフィール画像アップロード機能を題材にCI/CDを段階的導入
- 「テスト→CI→デプロイ自動化」の順で実装

### 主要な制約

- TypeScript不使用、Bootstrap/jQuery/Options API禁止
- 個人開発のため実装工数を最小限に
- デプロイ優先、完璧主義を避ける
- **予算制約**: 月1,000-3,000円（転職活動期間3-6ヶ月）
- **Git管理対象**: `laravel-docker/src/`のみ（インフラ設定は対象外）
- **転職活動タイムライン**: 2026年1月〜3月が書類選考・面接期間

---

## 完了・確定事項

### プロジェクトの現在地

- ✅ Phase 0-3: アプリケーション開発・VPS環境構築・SSL化完了
- ✅ Phase 4-1〜4-4: 理解度チェック・APIテスト環境整備完了
- ✅ Phase 2-1〜2-4: ドキュメント整備・履歴書・職務経歴書作成完了
- ✅ CI/CD書籍学習完了（2,3,4,5,7,8,12,15,17,18章）

### 直近完了した実装（1/15）

1. ✅ GitHub Actions学習ノート作成（9章分）
2. ✅ 18章「継続的デリバリーの実践」の読了
3. ✅ LearnTrack Pro向けCI導入方針の策定

### 作成済みドキュメント

- 環境構築メモ①〜⑧、本番環境構築手順書
- アプリケーションロジック理解度チェック（全6機能）
- API設計（包括的ドキュメント）、各API仕様書
- README（GitHub公開用）
- 職務経歴書の方向性、履歴書の志望動機テンプレート
- 技術経歴書（項目1〜3）
- GitHub Actions学習ノート（2,3,4,5,7,8,12,15,17,18章）

---

## これまでの議論で確定した方針

### 1. CI/CD段階的導入

**要点**: プロフィール画像アップロード機能を最初のCI対象として、テスト→CI→デプロイの順で実装する

**判断基準**: 18章「段階的導入」の推奨順序に従い、小さく始めて拡張する

### 2. テストファーストのCI構築

**要点**: テストを書いてからCIを設定する（テストがないとCIを動かしても意味がない）

**判断基準**: Laravelで手動テストを書いた経験がほぼないため、まずFeatureテストの書き方を習得

### 3. デプロイ自動化の分離

**要点**: CIとデプロイ自動化は別タスクとして分離する

**判断基準**: VPSへのSSHデプロイは複雑度が高く、CIの習得を先に完了させるべき

### 4. 最小権限のワークフロー設計

**要点**: ワークフロー冒頭で`permissions: {}`を書き、ジョブごとに必要分だけ許可する

**判断基準**: 15章で学んだセキュリティベストプラクティスを最初から適用

### 5. サードパーティアクションのコミットハッシュ固定

**要点**: タグ指定ではなくコミットハッシュで固定し、Dependabotで更新管理

**判断基準**: サプライチェーン攻撃対策の基本

### 6. Dependabotの即時有効化

**要点**: version updates + security updates + alertsの3つを有効化

**判断基準**: 設定が簡単で、脆弱性対応の漏れを防げる

---

## やってはいけないこと

1. SSHパスワード認証を有効化
2. rootで直接ログイン許可
3. MySQLのDocker化
4. mainでローカル用設定をコミット
5. SecretsにJSONやYAMLを保存
6. コンテキストを直接シェルコマンドに埋め込む（スクリプトインジェクション）
7. `pull_request_target`イベントの使用（仕様が複雑）
8. Dependabot PRをclose（reopenしないと同じバージョンで再作成されない）

---

## 技術選択と教訓

### 重要な技術選択の判断

1. **PHPUnit採用**: Laravel標準のFeatureテストから開始、Pestは将来検討
2. **shivammathur/setup-php**: PHP向けGitHub Actionsの定番、キャッシュ機能内蔵
3. **Dependabot version updates + security updates併用**: version updatesの除外設定がsecurity updatesにも影響するため、alertsと併用
4. **actionlint導入**: ShellCheckを内包しており、スクリプトインジェクション対策を自動カバー

### 重要な教訓

1. CI/CDの学習は「読んで理解 → 手を動かして腹落ち」のサイクルが必要
2. 誤検出（False Positive）が多いツールは運用継続の意欲を失わせる
3. 一度クローズしたDependabot PRは同じバージョン更新では再作成されない
4. 書籍の各章を実践する際は、前の章のワークフローファイルを`.yml.bak`に変更して問題切り分けを容易にする

---

## 次のアクション

### Phase 3-1: Featureテスト作成（優先度: 最高）

**工数**: 1日

**作業内容**: プロフィール画像アップロードAPIのFeatureテストを1つ書く

### Phase 3-2: CIワークフロー作成（優先度: 最高）

**工数**: 1日

**作業内容**: PR時にPHPUnitを実行する最小構成のワークフローを作成

### Phase 3-3: CI拡張（優先度: 高）

**工数**: 1-2日

**作業内容**:

- PHPStan/ESLintの追加
- Dependabot設定（composer + npm + github-actions）
- リポジトリセキュリティ設定（15章/16章のチェックリスト実施）

### Phase 3-4: デプロイ自動化（優先度: 中）

**工数**: 2-3日

**作業内容**: VPSへのSSHデプロイワークフロー作成（別タスクとして切り出し）
