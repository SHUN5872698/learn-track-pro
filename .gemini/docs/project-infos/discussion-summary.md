# これまでの議論の要点まとめ（最新版：2026年1月16日更新）

## 背景・経緯

### プロジェクトの概要

- **プロジェクト名**: LearnTrack Pro - プログラミング学習管理プラットフォーム
- **技術スタック**: Laravel 12 / Vue 3 (Composition API) / Pinia / MySQL 8.0
- **構成**: モノリシックSPA
- **現在の状態**: プロフィール画像アップロード機能の開発仕様書作成完了、実装準備段階

### 目的・目標

- 転職活動用ポートフォリオとして公開
- プロフィール画像アップロード機能を題材にCI/CDを段階的導入
- 「テスト→CI→デプロイ自動化」の順で実装

### 主要な制約

- TypeScript不使用、Bootstrap/jQuery/Options API禁止
- 個人開発のため実装工数を最小限に
- デプロイ優先、完璧主義を避ける
- **予算制約**: 月1,000-3,000円（転職活動期間3-6ヶ月）
- **Git管理対象**: `laravel-docker/src/`のみ（インフラ設定は対象外）
- **転職活動タイムライン**: 2026年1月〜3月が書類選考・面接期間

---

## 完了・確定事項

### プロジェクトの現在地

- ✅ Phase 0-3: アプリケーション開発・VPS環境構築・SSL化完了
- ✅ Phase 4-1〜4-4: 理解度チェック・APIテスト環境整備完了
- ✅ Phase 2-1〜2-4: ドキュメント整備・履歴書・職務経歴書作成完了
- ✅ CI/CD書籍学習完了（2,3,4,5,7,8,12,15,17,18章）
- ✅ プロフィール画像アップロード機能の開発仕様書作成完了

### 直近完了した実装（1/16）

1. ✅ プロフィール画像アップロード機能の要件確定（バリデーション仕様、API設計、テスト方針）
2. ✅ GitHub Issue作成（実装タスク管理体制整備）
3. ✅ 開発仕様書作成・テンプレート化（便利プロンプト集に登録）
4. ✅ ドキュメント更新チェックリスト作成（リンク付き）

### 作成済みドキュメント

- 環境構築メモ①〜⑧、本番環境構築手順書
- アプリケーションロジック理解度チェック（全6機能）
- API設計（包括的ドキュメント）、各API仕様書
- README（GitHub公開用）
- 職務経歴書の方向性、履歴書の志望動機テンプレート
- 技術経歴書（項目1〜3）
- GitHub Actions学習ノート（2,3,4,5,7,8,12,15,17,18章）
- 開発仕様書作成用プロンプト（便利プロンプト集）

---

## これまでの議論で確定した方針

### 1. 開発仕様書の標準化

**要点**: 開発仕様書作成時は「ドキュメント更新チェックリスト」で更新対象を特定し、漏れを防ぐ

**判断基準**: AIがドキュメント更新漏れを繰り返したため、ユーザー判断を前提としたチェックリスト運用に変更

### 2. プロンプト内の参照とチェックリストの分離

**要点**: 「参照（基準・サンプル）」はAIが構成を学習するため、「チェックリスト」はユーザーが該当項目を判断するため

**判断基準**: 目的が異なる2種類の情報を明確に分離し、AIの精度を向上

### 3. バリデーション2層構成

**要点**: フロントエンド（UX向上・即時フィードバック）とバックエンド（セキュリティ・必須）の2層で実装

**判断基準**: セキュリティはバックエンドで担保し、フロントエンドはUX向上のみを目的とする

### 4. テスト方針

**要点**: PHPUnit Featureテスト + Apidogテスト + 手動テストの3種類（E2Eテストは使用しない）

**判断基準**: 個人開発の工数制約とプロジェクトの規模に適した構成

### 5. CI/CD段階的導入

**要点**: プロフィール画像アップロード機能を最初のCI対象として、テスト→CI→デプロイの順で実装

**判断基準**: 18章「段階的導入」の推奨順序に従い、小さく始めて拡張する

### 6. 最小権限のワークフロー設計

**要点**: ワークフロー冒頭で`permissions: {}`を書き、ジョブごとに必要分だけ許可

**判断基準**: 15章で学んだセキュリティベストプラクティスを最初から適用

### 7. ブランチ命名規則

**要点**: Gitflow + Conventional Commitsのハイブリッド（feature/, fix/, refactor/, docs/等）

**判断基準**: 変更内容が明確になり、履歴を追いやすい（ブランチ戦略の導入参照）

---

## やってはいけないこと

1. SSHパスワード認証を有効化
2. rootで直接ログイン許可
3. MySQLのDocker化
4. mainでローカル用設定をコミット
5. SecretsにJSONやYAMLを保存
6. コンテキストを直接シェルコマンドに埋め込む
7. Dependabot PRをclose

---

## 技術選択と教訓

### 重要な技術選択の判断

1. **PHPUnit採用**: Laravel標準のFeatureテストから開始、Pestは将来検討
2. **shivammathur/setup-php**: PHP向けGitHub Actionsの定番、キャッシュ機能内蔵
3. **Dependabot version updates + security updates併用**: alertsと併用で漏れを防ぐ

### 重要な教訓

1. AIへのコンテキスト共有は「参照（学習用）」と「チェックリスト（判断用）」を目的別に分離する
2. 開発仕様書の標準化により、ドキュメント更新漏れを防ぐチェックリスト運用が重要
3. 一度クローズしたDependabot PRは同じバージョン更新では再作成されない

---

## 次のアクション

### Phase 3-1: バックエンド実装（優先度: 最高）

**工数**: 1日

**作業内容**:

- ブランチ作成（feature/avatar-upload）
- AvatarController、StoreAvatarRequest作成
- Userモデルにavatar_pathカラム追加
- マイグレーション実行

### Phase 3-2: Featureテスト作成（優先度: 最高）

**工数**: 1日

**作業内容**: プロフィール画像アップロードAPIのPHPUnit Featureテスト（8ケース）

### Phase 3-3: フロントエンド実装（優先度: 高）

**工数**: 1日

**作業内容**: ProfileEdit.vueにアップロードUI追加、useAvatarUpload Composable作成

### Phase 3-4: CIワークフロー作成（優先度: 高）

**工数**: 1日

**作業内容**: PR時にPHPUnitを実行する最小構成のワークフローを作成

### Phase 3-5: ドキュメント更新（優先度: 高）

**工数**: 0.5日

**作業内容**: 要件定義書、API設計、簡易設計&画面フロー、ディレクトリ構造、手動テストリスト更新

---

## 特記事項

### プロジェクトの健全性評価

- **進捗**: 良好（CI/CD学習完了、開発仕様書作成完了、実装準備段階）
- **技術的負債**: 低（ドキュメント整備済み、テスト方針確定）
- **ドキュメント**: 良好（開発仕様書テンプレート化、チェックリスト運用開始）

### 実装完了までのクリティカルパス

- バックエンド実装: 1日
- Featureテスト: 1日
- フロントエンド: 1日
- CI設定: 1日
- ドキュメント更新: 0.5日
- **合計: 約5日**
