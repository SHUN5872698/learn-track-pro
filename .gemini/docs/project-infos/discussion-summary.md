# これまでの議論の要点まとめ（最新版：2025年10月23日更新）

## 背景・経緯

### プロジェクトの概要

- **プロジェクト名**: LearnTrack Pro - プログラミング学習管理プラットフォーム
- **技術スタック**: Laravel 12 / Vue 3 (Composition API) / Pinia / MySQL 8.0
- **構成**: モノリシックSPA
- **現在の状態**: ✅ Phase 2完了（10/22） → 🎯 **Phase 3-1完了（デプロイ先選定）（10/23）** ← 今ここ

### 目的・目標

- 転職活動用ポートフォリオとして公開
- 実用的なDevOps経験の習得（Docker本番運用、CI/CD）
- コスト最適化を最優先

### 主要な制約

- TypeScript不使用、Bootstrap/jQuery/Options API禁止
- 個人開発のため実装工数を最小限に
- デプロイ優先、完璧主義を避ける
- **予算制約**: 月1,000-3,000円（転職活動期間3-6ヶ月）

---

## 完了・確定事項

### プロジェクトの現在地

- ✅ Phase 0-2: アプリケーション開発完了（10/14-22）
- ✅ **Phase 3-1: デプロイ先選定完了（10/23）**
- 🔜 Phase 3-2: VPS環境構築開始予定

### Phase 3-1完了内容（10/23）

- デプロイ先選定: **Xserver VPS 2GB（月1,150円）採用決定**
- AWS断念理由の明確化（コスト面）
- ハイブリッド構成の確定（Laravel Docker化、MySQL直接インストール）
- 無料トライアル活用戦略の決定

### 作成済みドキュメント

- デプロイ先選定の詳細ドキュメント（[**AWS環境構築**](https://www.notion.so/AWS-2959d86c12e880c4a611cfb965506ffa?pvs=21)）
    - AWS料金調査、コスト比較表
    - VPS採用理由
    - ハイブリッド構成の詳細
    - 無料トライアル活用戦略
    - 転職面接での回答例

---

## これまでの議論で確定した方針

### 1. デプロイ先選定の判断基準（★最重要）

**結論**: Xserver VPS 2GB（月1,150円）を採用

**AWS断念の理由**:

- EC2 + RDS: 月4,947円（予算の約3-5倍）
- EC2のみ: 月2,132円（依然VPSの1.85倍）
- RDSが異常に高い（月約3,100円、VPS全体より高い）
- RDSの機能（自動バックアップ等）はVPSでcron実装可能
- 小規模アプリではAWSの利点（スケーリング）を活かせない
- 学習コストを開発品質向上に使う方が転職アピールに有効

**判断基準**: コスト最適化 > クラウドブランド

詳細: [**AWS環境構築**](https://www.notion.so/AWS-2959d86c12e880c4a611cfb965506ffa?pvs=21) 参照

### 2. ハイブリッド構成の採用（★最重要）

**構成**: LaravelのみDocker化、MySQLは直接インストール

**理由**:

- **LaravelのみDocker化**: CI/CDでイメージビルド自動化が目的
- **MySQLは直接インストール**:
    - メモリ2GBでギリギリ
    - コンテナ数が増えると内部/外部ネットワーク設定が複雑化
    - コンテナごとのユーザー作成、セキュリティ設定の手間
    - 過去の経験で複雑化して断念した経緯
- **AWS RDS構想と同じ発想**: 外部DBサービスとして扱う
- **phpMyAdmin使用**: GUI操作の個人的好み

詳細: [**AWS環境構築**](https://www.notion.so/AWS-2959d86c12e880c4a611cfb965506ffa?pvs=21) 参照

### 3. 学習価値の再定義（★重要）

**方針転換**: クラウド経験 → 開発力重視

**アピールポイント**:

- コスト最適化の意思決定
- Docker本番運用、CI/CD構築
- クラウド移行も考慮した設計（コンテナ化済み）

**転職面接での回答方針**: 「コスト最適化でVPS選択。Dockerコンテナ化によりクラウド移行も容易」

### 4. 従来の確定方針（Phase 0-2）

**Axiosインスタンスの使い分け**:

- `/api/*` → `import api from '@/plugins/axios'`
- `/fortify/*`, `/sanctum/*` → `import axios from 'axios'`

**エラーハンドリングの3原則**:

1. 再スロー必須
2. ストアは使用直前に初期化
3. GlobalErrorModalはApp.vue直下

**レスポンシブ対応の2サイズ戦略**:

- モバイル（〜767px）とデスクトップ（768px〜）のみ
- `md:`使用、`sm:`は使用しない

**@apply化による共通スタイル統一**:

- `.section-header`, `.form-input-base`等
- コード重複40%削減

**コンソールログの扱い**:

- Viteのビルド時自動削除（`terserOptions`）
- Phase 3デプロイ直前に確認

---

## やってはいけないこと（★重要）

1. **Axiosインスタンスの混同** - `/api/*`で`axios`を使う
2. **ストアでエラーを握りつぶす** - `throw error;`必須
3. **TailwindCSSの`sm:`使用** - `md:`のみ使用
4. **完璧主義** - リスクベースで優先度判断
5. **Docker全体化** - メモリ不足、ネットワーク設定複雑化
6. **MySQLのDocker化** - ハイブリッド構成を採用

---

## 技術選択と教訓

### 重要な教訓

1. **コスト最適化が最優先**: クラウドブランドよりも予算内で実現可能な構成
2. **過去の経験を活かす**: Docker全体化の複雑さを経験済み → ハイブリッド構成
3. **VPSで実装可能なAWS機能は多い**: cron、ufw、fail2ban等で代替可能
4. **完璧主義を避ける**: デプロイ優先、理想より実用性

---

## 次のアクション

### Phase 3-2: VPS環境構築（優先度: ★★★★★）

**工数見積**: 4-6日

**内容**:

1. 無料トライアル申し込み（2GBプラン）
2. VPS初期設定（Ubuntu、Docker、MySQL、phpMyAdmin）
3. Docker本番用ファイル作成（[`docker-compose.prod](http://docker-compose.prod).yml`, [`Dockerfile.prod`](http://Dockerfile.prod)）
4. セキュリティ設定（ufw、fail2ban、SSH鍵認証）
5. Laravel デプロイ、動作確認
6. 環境構築手順書の作成

**ブランチ例**:

- `chore/vps-setup`
- `chore/docker-production-config`
- `chore/security-hardening`

### Phase 3-3: CI/CD構築（優先度: ★★★★☆）

**工数見積**: 2-3日

**内容**:

- GitHub Actions設定
- 自動デプロイパイプライン構築
- 本番ビルド確認（console.log削除確認）

---

## 特記事項

### プロジェクトの健全性評価

- **進捗状況**: ✅ 優良（Phase 3-1完了）
- **技術的負債**: ✅ 最小限
- **ドキュメント**: ✅ 優良（デプロイ先選定の詳細記録済み）

### デプロイまでのクリティカルパス

**約6-9日**:

- Phase 3-2（VPS環境構築）: 4-6日
- Phase 3-3（CI/CD）: 2-3日
