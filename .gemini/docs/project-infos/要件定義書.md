## 相互リンク

[要件定義書](https://www.notion.so/2479d86c12e881878bb9c8dc6f9c8b3c?pvs=21) 

.gemini/docs/project-infos/要件定義書.md

---

## 1. プロジェクト概要

### 1.1 プロジェクト基本情報

- **プロジェクト名**: LearnTrack Pro - プログラミング学習管理プラットフォーム
- **開発目的**: 転職活動用ポートフォリオとして、Laravel 12とVue.js 3を用いたモダンなSPAアプリケーションの開発
- **ターゲット**: 企業の採用担当者および技術者
- **開発期間**: 4.5週間（22営業日、合計110時間）
    - **開始日**: 2025年9月3日（水）
    - **終了日**: 2025年9月30日（火）
- **バッファ期間**: 1週間（2025年10月1日〜10月7日）
- **バッファを含めた全体期間**: 5.5週間
    - **最終完成期限**: 2025年10月7日（火）
- **事前準備期間**: 23日間（2025年8月11日〜9月2日）
- **開発手法**: APIファーストアプローチ with AI駆動開発

### 1.2 StudyPlusとの差別化ポイント

- **StudyPlus**: 書籍・教材ベースの汎用学習記録アプリ
- **LearnTrack Pro**: プログラミング学習特化、教材に依存しない柔軟な学習内容管理
- **核心的差別化**: 「ポートフォリオ作成実践」「Laravel環境構築」など、書籍が存在しない学習内容に対応

### 1.3 技術スタック

- **Backend**: Laravel 12.x (PHP 8.3+)
- **Frontend**: Vue.js 3 (Composition API) + Tailwind CSS
- **状態管理**: Pinia
- **ビルドツール**: Vite
- **Database**: MySQL 8.0
- **認証**: Laravel Sanctum, Laravel Fortify (SPA認証)
- **チャート**: Chart.js
- **開発環境**: Docker

### 1.4 開発支援ツール

- **API設計・テスト**: Apidog
- **UI生成**: Bolt.new
- **バージョン管理**: Git
- **エディタ**: VS Code
- **AI支援**: Gemini CLI, Claude

---

## 2. 解決すべき課題

### 2.1 核心的な問題

1. **プログラミング学習の特殊性**
    - 書籍に依存しない学習内容（ポートフォリオ作成、環境構築実践等）
    - 技術分野別の学習管理の必要性
2. **学習進捗の可視化不足**
    - セクション単位での詳細な進捗管理
    - 学習時間と進捗率の相関分析
3. **学習履歴の分析機能不足**
    - 技術分野別の学習時間分析
    - 学習パターンの把握

### 2.2 成功指標

- セクション単位での進捗可視化
- 技術分野別学習時間の分析
- 週間学習パターンのチャート表示

---

## 3. 機能要件

### 3.1 MVP機能（必須実装）

### 3.1.1 認証機能

- ユーザー登録
- ログイン・ログアウト
- パスワードリセット
- パスワード変更
- ユーザープロフィール表示・編集

### 3.1.2 学習内容管理

- 学習内容登録（技術選択、タイトル、説明）
- セクション管理（作成、編集、削除、並び替え）
- 進捗率計算・表示（完了セクション数 / 総セクション数）
- 学習内容一覧・詳細表示

### 3.1.3 学習記録機能

- **手動記録入力**
    - 学習時間（分単位）
    - 学習メモ
    - 調子評価（1-5段階、任意）
- **ストップウォッチ機能**（条件付き実装 ★★★★☆）
    - 計測開始・停止・リセット
    - Page Visibility API対応（バックグラウンド動作）
    - 計測完了時の学習記録自動保存
    - タブ切り替え（手動入力 ↔ ストップウォッチ）

### 3.1.4 基本レポート機能

- **週間学習時間推移チャート**（棒グラフ）
- **期間別データ表示切り替え**（条件付き実装 ★★★☆☆）
    - 1週間・1ヶ月・全期間の切り替え
    - URLパラメータでの期間状態保持
- 技術分野別学習時間表示
- 学習履歴一覧（日付、時間、メモ表示）

### 3.2 条件付き拡張機能（開発期間内での実装判断）

### Phase 0拡張機能

- **ストップウォッチ機能**: Week 2フロント実装の余裕に応じて実装
- **期間切り替え機能**: Week 3バックエンド実装の余裕に応じて実装

### 将来拡張機能（MVP後）

- 複数チャート種類（ドーナツ、線グラフ）
- 週間目標設定・達成状況
- 学習内容のカテゴリ詳細分類
- ストップウォッチ高度化（一時停止、複数セッション管理）

---

## 4. 画面設計

### 4.1 画面一覧

1. 認証関連
    - ログイン画面
    - ユーザー登録画面
    - パスワードリセット画面
2. メイン機能
    - 学習内容一覧画面（メインページ）
    - 学習内容詳細・セクション管理画面
    - 学習内容登録画面
    - 学習記録入力画面（手動入力 + ストップウォッチタブ）
    - 学習記録編集画面
    - レポート画面
    - 学習推移詳細画面（チャート表示・期間切り替え）
3. ユーザー管理
    - ユーザープロフィール表示
    - ユーザー情報編集画面

### 4.2 画面フロー

```mermaid
flowchart TD
    A[ログイン] --> B[ダッシュボード]

    %% ヘッダーからの記録
    B --> R[➕記録アイコン<br/>ヘッダー右上]
    R --> E[学習記録入力]

    %% 学習内容管理
    B --> C[学習内容一覧]
    C --> O[新規学習内容作成]
    O --> D[学習内容詳細]
    C --> D[学習内容詳細<br/>セクション管理]

    %% レポート関連
    B --> I[レポート画面]
    I --> I1[全体の学習推移<br/>クリック]
    I1 --> J[学習推移詳細]
    J --> K[期間切り替え]
    J --> L[カテゴリ検索]

    %% ユーザー管理
    B --> M[ユーザープロフィール]
    M --> N[ユーザー編集]

    %% グローバルナビ
    B -.-> C
    B -.-> I
    B -.-> M

```

---

## 5. API設計

### 5.1 RESTful エンドポイント

### 認証関連

```
POST   /api/register
POST   /api/login
POST   /api/logout
GET    /api/user
PUT    /api/user/profile
PUT    /api/user/password
POST   /api/forgot-password
POST   /api/reset-password

```

### 学習内容管理

```
GET    /api/learning-contents
POST   /api/learning-contents
GET    /api/learning-contents/{id}
PUT    /api/learning-contents/{id}
DELETE /api/learning-contents/{id}

```

### セクション管理

```
GET    /api/learning-contents/{id}/sections
POST   /api/sections
PUT    /api/sections/{id}
DELETE /api/sections/{id}
PUT    /api/sections/{id}/status

```

### 学習記録

```
POST   /api/learning-sessions
GET    /api/learning-sessions
GET    /api/learning-sessions/{id}
PUT    /api/learning-sessions/{id}
DELETE /api/learning-sessions/{id}

```

### レポート・統計

```
GET    /api/reports/weekly-chart?period=week&date=2025-02-01
GET    /api/reports/technology-summary?period=month
GET    /api/reports/learning-history?period=week&page=1

```

### マスターデータ

```
GET    /api/categories
GET    /api/technologies

```

---

## 6. データベース設計

### 6.1 ER図

```mermaid
erDiagram
    users ||--o{ learning_contents : "creates"
    users ||--o{ learning_sessions : "records"
    categories ||--o{ technologies : "contains"
    technologies ||--o{ learning_contents : "used_in"
    learning_contents ||--o{ sections : "contains"
    learning_contents ||--o{ learning_sessions : "tracked_in"
    sections ||--o{ learning_sessions : "studied_in"

    users {
        bigint id PK
        string name
        string email UK
        string password
        timestamp created_at
        timestamp updated_at
    }

    categories {
        bigint id PK
        string name
        string icon
        timestamp created_at
        timestamp updated_at
    }

    technologies {
        bigint id PK
        bigint category_id FK
        string name
        string icon
        timestamp created_at
        timestamp updated_at
    }

    learning_contents {
        bigint id PK
        bigint user_id FK
        bigint technology_id FK
        string title
        text description
        int total_sections
        int completed_sections
        timestamp created_at
        timestamp updated_at
    }

    sections {
        bigint id PK
        bigint learning_content_id FK
        string title
        int order
        enum status
        timestamp created_at
        timestamp updated_at
    }

    learning_sessions {
        bigint id PK
        bigint user_id FK
        bigint learning_content_id FK
        bigint section_id FK
        int study_minutes
        text memo
        int mood_rating
        enum session_type
        timestamp studied_at
        timestamp created_at
        timestamp updated_at
    }

```

### 6.2 主要テーブル詳細

### categories テーブル（マスターデータ）

```sql
INSERT INTO categories (name, icon) VALUES
('プログラミング言語', 'code'),
('開発環境・ツール', 'tools'),
('その他', 'book');

```

### technologies テーブル（Seederデータ）

```sql
-- プログラミング言語
('PHP', 'php-icon', 1),
('JavaScript', 'js-icon', 1),
('Python', 'python-icon', 1),

-- 開発環境・ツール
('Laravel', 'laravel-icon', 2),
('Vue.js', 'vue-icon', 2),
('Docker', 'docker-icon', 2),
('Git', 'git-icon', 2),

-- その他
('アルゴリズム', 'algorithm-icon', 3),
('設計パターン', 'design-icon', 3);

```

### sections.status（列挙型）

各セクションの学習進捗状態を管理

```sql
ENUM('not_started', 'in_progress', 'completed')
-- not_started: 未着手（初期状態）
-- in_progress: 学習中（学習記録が1回以上ある状態）
-- completed: 完了（ユーザーが明示的に完了マークした状態）

```

### learning_sessions.session_type（列挙型）

学習記録の入力方法を区別し、ストップウォッチ機能の実装状況を管理

```sql
ENUM('manual', 'stopwatch')
-- manual: 手動入力（時間を手入力で記録）
-- stopwatch: ストップウォッチ（自動計測で記録）

```

---

## 7. 技術的考慮事項

### 7.1 SPA認証フロー

```mermaid
sequenceDiagram
    participant U as User
    participant V as Vue App
    participant P as Pinia Store
    participant L as Laravel API
    participant S as Sanctum

    U->>V: ログイン画面アクセス
    V->>L: GET /sanctum/csrf-cookie
    L->>V: CSRFトークン返却
    U->>V: 認証情報入力
    V->>L: POST /api/login
    L->>S: 認証処理
    S->>P: 認証状態保存
    P->>V: ダッシュボードへ遷移

```

### 7.2 ストップウォッチ技術仕様

```jsx
// Page Visibility APIでバックグラウンド対応
document.addEventListener('visibilitychange', () => {
  if (document.hidden) {
    // タブ非表示時: 現在時刻を保存
    store.pauseTimer(Date.now());
  } else {
    // タブ表示時: 経過時間を加算して再開
    store.resumeTimer(Date.now());
  }
});

// 正確な時間計測
const useStopwatch = () => {
  const startTime = ref(null);
  const elapsedTime = ref(0);
  const isRunning = ref(false);

  const start = () => {
    startTime.value = Date.now() - elapsedTime.value;
    isRunning.value = true;
    updateTimer();
  };

  const updateTimer = () => {
    if (isRunning.value) {
      elapsedTime.value = Date.now() - startTime.value;
      requestAnimationFrame(updateTimer);
    }
  };

  return { start, stop, reset, elapsedTime, isRunning };
};

```

### 7.3 期間切り替え技術仕様

```php
// レポートAPI: 期間別データ取得
class ReportController extends Controller
{
    public function weeklyChart(Request $request)
    {
        $period = $request->get('period', 'week'); // week, month, all
        $date = $request->get('date', now());

        $query = LearningSession::where('user_id', auth()->id());

        switch ($period) {
            case 'week':
                $startDate = Carbon::parse($date)->startOfWeek();
                $endDate = Carbon::parse($date)->endOfWeek();
                break;
            case 'month':
                $startDate = Carbon::parse($date)->startOfMonth();
                $endDate = Carbon::parse($date)->endOfMonth();
                break;
            default: // 'all'
                // 全期間
                break;
        }

        if (isset($startDate)) {
            $query->whereBetween('studied_at', [$startDate, $endDate]);
        }

        return $query->selectRaw('DATE(studied_at) as date, SUM(study_minutes) as total_minutes')
                     ->groupBy('date')
                     ->orderBy('date')
                     ->get();
    }
}

```

### 7.4 進捗率計算ロジック

```php
// Learning Content Model
public function getProgressPercentageAttribute()
{
    if ($this->total_sections === 0) return 0;

    return round(
        ($this->completed_sections / $this->total_sections) * 100,
        1
    );
}

```

---

## 8. 開発スケジュール

### 8.1 事前準備期間（2025年8月11日〜9月2日）

```mermaid
gantt
title LearnTrack Pro 事前準備スケジュール（土日休み考慮版）
dateFormat  YYYY-MM-DD

section 環境・基盤整備
Laravel環境構築+Git化      :env1, 2025-08-11, 2d

section 学習準備
TailwindCSS学習           :crit, learn1, 2025-08-13, 4d
APIファースト手法理解      :learn2, 2025-08-19, 1d

section 設計フェーズ
要件定義書最終整理+UI参考資料 :req1, 2025-08-20, 2d
Builder.io検証+API設計     :crit, design1, 2025-08-22, 2d

section UI/UX・統合準備
Bolt.newでUI/UX作成        :crit, ui1, 2025-08-26, 3d
Laravel環境統合準備        :setup1, 2025-08-29, 2d

section ルール・戦略整備
コーディングルール整備      :rule1, 2025-09-02, 1d

```

### 8.2 開発期間（2025年9月3日〜10月7日）

```mermaid
gantt
title LearnTrack Pro 開発スケジュール（4.5週間 + バッファ1週間）
dateFormat  YYYY-MM-DD

section Week 1-2: フロント完成
Mock API実装            :w1-1, 2025-09-03, 2d
フロント・Mock統合      :w1-2, after w1-1, 3d

section Week 3-4: バック実装
Laravel API実装         :w2-1, 2025-09-09, 3d
フロント・バック統合    :w2-2, after w2-1, 2d

section Week 4.5: 完成・テスト
統合テスト・調整        :w3-1, 2025-09-23, 2d
機能拡張・最終調整      :w3-2, after w3-1, 1d

section バッファ期間（1週間）
AWSデプロイ・本番確認   :w4-1, 2025-10-01, 3d
追加調整・ドキュメント  :w4-2, after w4-1, 2d
最終確認               :w4-3, after w4-2, 2d

```

### 8.3 条件付き拡張機能の実装判断

**ストップウォッチ機能実装条件**

- Week 2-3日目時点（2025年9月5日）でのUI実装進捗70%以上
- 基本画面（認証、管理、記録、履歴）動作確認完了

**期間切り替え機能実装条件**

- Week 3-3日目時点（2025年9月11日）でのAPI実装進捗70%以上
- 基本的なデータ取得・保存機能動作確認完了

---

## 9. 成果物の評価基準

### 9.1 機能面での評価ポイント

- ✅ プログラミング学習特化の学習内容管理
- ✅ セクション単位での詳細進捗管理
- ✅ 手動 + ストップウォッチ両対応の記録機能（条件付き）
- ✅ 期間別切り替え対応の学習時間チャート（条件付き）
- ✅ バックグラウンド対応ストップウォッチ（条件付き）
- ✅ レスポンシブ対応（PC + スマートフォン）

### 9.2 技術面での評価ポイント

- ✅ Laravel 12新機能の実践的活用
- ✅ Vue.js 3 Composition API + Pinia実装
- ✅ Tailwind CSSによるモダンUI構築
- ✅ SPA認証（Sanctum + Fortify）の実装
- ✅ APIファースト設計思想の実践
- ✅ Page Visibility API等のモダンWeb API活用（条件付き）

### 9.3 ポートフォリオとしての価値

- ✅ StudyPlusとの明確な差別化
- ✅ 実用的な学習管理アプリとして完成
- ✅ モダンな技術スタックの習得証明
- ✅ AWS本番デプロイまでの完遂
- ✅ リアルタイム機能の実装経験（条件付き）

---

## 10. リスク管理

### 10.1 主要リスク要因

### Bolt.new統合の複雑性

- **リスク**: 期待通りのUI生成ができない可能性
- **対策**: 段階的手動実装（TailwindCSSクラス活用）への切り替え

### 学習期間の制約

- **リスク**: TailwindCSS（4日間）、APIファースト手法（1日間）の学習不足
- **対策**: 限定スコープでの学習、必要に応じて基本機能に集中

### 開発期間の制約

- **リスク**: 4.5週間での完成度とスコープのバランス
- **対策**: 条件付き拡張機能の実装判断、MVP優先の開発、1.5週間のバッファ活用

### 10.2 判断タイムライン

- Week 1終了時（2025年9月6日）: UI生成50%以上完了 → 継続
- Week 2終了時（2025年9月13日）: フロント70%完了 → バック実装開始
- Week 3終了時（2025年9月20日）: フロント・バック接続確認 → 拡張機能判断
- Week 4終了時（2025年9月27日）: コア機能完成確認 → デプロイ準備

---

## 11. 開発後の展望

### 11.1 AWSへのデプロイ（1ヶ月以内）

- 本番環境構築・デプロイ
- SSL証明書設定・独自ドメイン対応
- 監視・ログ設定

### 11.2 短期的改善（1ヶ月目以降）

**転職活動との並行**

- CI/CDパイプライン構築
- ストップウォッチ高度化（一時停止、複数セッション）
- 週間目標設定機能

---

## 12. まとめ

本プロジェクトは、プログラミング学習に特化した管理プラットフォームとして、以下を実現します：

1. **技術的成長**: Laravel 12 + Vue.js 3 + Tailwind CSSの実践習得
2. **差別化価値**: StudyPlusにない「教材非依存」の学習管理
3. **実用性**: ストップウォッチ機能により日常的に活用可能な完成度
4. **転職活動**: モダン技術習得とリアルタイム機能実装の実績

**APIファーストアプローチとAI駆動開発により**:

- 効率的な開発プロセス
- 高品質なコード生成
- 段階的な機能拡張

**条件付き拡張機能により**:

- リスク管理と確実な完成
- 開発期間内での最適化
- 継続的な価値創造

---

**修正完了日**: 2025年8月9日

**開発開始予定**: 2025年8月26日（月）

**完成予定**: 2025年9月23日（火）

**最終完成期限**: 2025年10月7日（火）

テーブル定義書の作成
基本設計

- 画面フローと詳細仕様の設計
