## エグゼクティブサマリー

LearnTrack Pro（Laravel 12 + Vue 3 SPA）の開発を通じて、以下の重要な学びを得ました。

### 主要な教訓

1. **設計フェーズの重要性** 
    - 画面フロー・エラーハンドリングは実装前に設計すべき
2. **一貫性のある設計**
    - データ管理層・コンポーネント設計の統一基準を最初に策定
3. **段階的な品質向上** 
    - 「動く60点」で進め、完成時に品質を上げるアプローチが有効

---

## 1. 設計・要件定義の学び

### 1.1 画面フローの事前設計

**学んだこと**

- 簡易画面設計を入念に準備することで、実装中の手戻りを大幅に削減できる
- 特にセクション管理・進捗率計算など、複数機能にまたがる要件は早期に可視化すべき

**実践例**

- 学習内容の進捗率計算にセクションごとのステータスが必要なことに後から気づき、テーブル構造を修正
- 削除機能実装時に関連データのカスケード削除を見落としていた

**次回への適用**

```markdown
## 要件定義チェックリスト
- [ ] 全画面の画面フロー図作成
- [ ] 各機能の状態遷移を明確化
- [ ] 関連データの削除・更新ルール定義
```

### 1.2 ユースケース視点の設計

**学んだこと**

- 「なぜユーザーはこの機能を使うのか」を問わないと、独善的な実装になる
- 機能実装が目的化すると、ユーザー体験の設計が抜け落ちる

**実践例**

- 学習内容の完了ステータス管理で「システム側に決められたくない」という自分の好みだけで判断
- 結果として、一部のユースケース（全セクション完了時の自動通知など）を満たせていない

---

## 2. アーキテクチャ設計の学び

### 2.1 データ管理層の統一

**学んだこと**

- Mock実装でも本番と同じアーキテクチャを採用すべき
- データソースの詳細をコンポーネントから隠蔽することで、変更に強い設計になる

**実践例**

- `useUser`（Composable）から`useAuthStore`（Pinia）への移行で全コンポーネントの修正が必要に
- 最初からPiniaストアで統一していれば、Mock/APIの切り替えはストア内部の変更のみで完結

**採用した解決策**

```jsx
// stores/auth.js - データソースの抽象化
const dataSource = [import.meta.env.DEV](http://import.meta.env.DEV) ? mockData : apiData;
```

### 2.2 共通コンポーネント化の判断基準

**学んだこと**

- 「不均一」自体は問題ではない
    - 適切な理由があれば異なるパターンの混在は許容される
- 判断基準の明文化が重要
    - ルールがないことが最大の問題

**策定した基準**

| 条件 | 実装場所 |
| --- | --- |
| Create/Edit両方で使用 | Composable化 |
| バリデーションが複雑 | Composable化 |
| Editのみ・シンプル | reactive（コンポーネント内） |
| 単一の値 | ref |

### 2.3 エラー状態の設計

**学んだこと**

- バリデーションエラー表示などのUX要件は、後付けすると実装が複雑化する
- 状態管理の設計は最初に行うべき

**実践例**

- 「エラー表示→入力で消える」という要件を後から追加
- Props/Emitの連鎖が複雑化し、複数コンポーネントで同じ修正を繰り返す結果に

---

## 3. 品質管理の学び

### 3.1 テスト戦略

**学んだこと**

- 「動いた」と「完成」は違う
    - 正常系が動作しても、異常系・境界値は別途確認が必要
- 楽観視は遅延の原因
    - 「期限当日に実装すれば間に合う」は危険な判断

**実践例**

- Apidogで正常系テストのみ実施し、境界値テストを省略
- バリデーション実装漏れが多数発覚し、2〜3日の遅延が発生

**策定したテスト計画**

```markdown
## 最低限実施すべきテスト項目
1. 正常系テスト
2. 境界値テスト（最小値、最大値、限界値±1）
3. 異常系テスト（不正な値、型不一致）
4. エラーハンドリングテスト（401/403/404/422/500）
5. 権限テスト（他ユーザーのデータアクセス）
```

### 3.2 エラーハンドリングの実装タイミング

**学んだこと**

- エラーハンドリングは「最初から」設計に含めるべき
- 後付け実装は、実装工数もテスト工数も増大させる

**実践例**

- MVP完成後にエラーハンドリングを追加する方針を採用
- 結果として全機能を見直す大規模修正が必要に（+5日）

**採用した解決策**

```jsx
// Axiosインターセプターで集中管理
api.interceptors.response.use(
  (response) => response,
  (error) => {
    const status = error.response?.status;
    if (status === 401 || status === 419) { /* ログイン画面へ */ }
    else if (status === 403) { /* 権限エラー表示 */ }
    else if (status === 404) { /* NotFound表示 */ }
    else if (status >= 500) { /* エラーモーダル表示 */ }
    return Promise.reject(error);
  }
);
```

---

## 4. 開発プロセスの学び

### 4.1 個人開発における優先順位

**学んだこと**

- 「動く60点」は開発中の基準、「完成」はリリース時の基準
    - 段階的に品質を上げる
- 完璧な理解を待つより、動くものを作りながら学ぶ方が効率的

**実践したアプローチ**

```markdown
## 開発フェーズの優先順位
1. 最優先: 動作する実装（締切厳守）
2. 重要: 見た目の完成度
3. 可能なら: テスト・ドキュメント
4. 後回し: 完璧な理解・リファクタリング
```

### 4.2 AI協業における責任

**学んだこと**

- AIに丸投げすると「動くが理解できないコード」になる
- 最終的な責任はエンジニア自身が負う
    - 実務では説明責任・再現性が必須

**実践例**

- 仕様が曖昧な状態でAIに指示を出して進めた結果、API仕様書と実装が乖離
- 事後学習で概念を理解し、ドキュメントを修正

### 補足：AI-DLC/SDDの学習を経て（2025年12月）

上記の「動く60点」は**プロトタイプや初期検証段階**での方針として有効でした。

しかし、AI-DLC（AI-Driven Development Lifecycle）や仕様駆動開発（SDD）を学び、**開発の初期段階で仕様を明確に決めることが、AIとの協業や手戻り削減に直結する**と分かりました。

- **プロトタイプ・検証段階**：スピード重視（変わらず）
- **本格開発段階**：仕様を先に固め、AIに正確なコンテキストを渡す

この考え方の変化は、LearnTrack Pro開発時に経験した「エラーハンドリングの後付け実装による工数増大」とも整合します。

---

## 5. 技術的な学び

### 5.1 SPA認証とAPI設計

**学んだこと**

- RESTful API設計の概念（dataラップ、JsonResource、ページネーション）は事前学習が必要
- Fortify認証系とCRUD系でレスポンス形式を統一するルールを策定すべき

**策定したAPIレスポンスルール**

| API種別 | レスポンス形式 |
| --- | --- |
| Fortify認証系 | dataラップなし |
| CRUD系 | Resource使用（自動dataラップ） |
| 統計・集計 | dataラップなし（生配列） |

### 5.2 Vue 3 Composition API

**学んだこと**

- Composables（ビジネスロジック層）とStore（API通信・状態管理層）の責務分離が重要
- 判断基準を明文化することで、一貫性のあるコードベースを維持できる

---

## まとめ

### このプロジェクトで最も価値があった学び

1. **Phase 0（基盤構築）の重要性**
    - エラーハンドリング、認証基盤、共通コンポーネントは最初に作るべき
2. **判断基準の明文化**
    - ルールがないことが最大の問題
    - AIに指示する際にも明確な基準が必要
3. **仕様定義と実装のバランス**
    - プロトタイプ段階ではスピード重視、本格開発では仕様を先に固める
    - AI-DLC/SDDの学習を経て、この考え方を更新

### 開発後も学び続けること

本プロジェクト完了後、AI-DLC（AI-Driven Development Lifecycle）や仕様駆動開発（SDD）を学習し、以下の認識を深めました。

- **AIとの協業には正確な仕様が不可欠**：曖昧な指示では品質が安定しない
- **設計フェーズへの投資が手戻りを削減**：LearnTrack Proで経験した後付け実装の工数増大と整合
- **継続的な学習がエンジニアの価値**：技術トレンドのキャッチアップを怠らない

---
