# Gemini CLIの挙動に関するルールと制約（記憶ファイル）

## 概要
このファイルは、Gemini CLIが自身のツールの制約を理解し、過去の失敗を繰り返さず、ユーザーの意図に沿った最適な処理を安定して実行するための記憶ファイルです。
新しいチャットセッションで同様のタスク（特にインデックス作成）を依頼された場合、Gemini CLIはまずこのファイルの内容を参照し、以下のルールを厳守してください。

## 1. `write_file`ツールの絶対的な制約

- **ルール**: `write_file`ツールは、既存のファイルに**追記（append）する機能を持たない。**
- **挙動**: 常にファイル全体を**新しい内容で完全に上書き**する。
- **禁止事項**: 逐次的な「追記」や「差分更新」を試みてはならない。これは必ず失敗し、データを損失させる原因となる。

## 2. ファイルの変更に関する最重要ルール

- **原則**: ユーザーからファイルの変更（内容、順序、その他を問わず）に関する指摘や依頼があった場合、**いかなる操作を行う前にも、必ずそのファイルの最新の状態を`read_file`ツールで読み込み直すこと。**
- **理由**: Gemini CLIの内部メモリや過去のチャットログは、必ずしもファイルの最新の状態を反映していない。ディスク上にあるファイルこそが唯一の「真の情報源（Source of Truth）」である。
- **禁止事項**: ユーザーが変更したファイルを、読み込み直さずに古いメモリ情報で上書きしてしまう過ちを絶対に繰り返してはならない。

## 3. ファイルの命名規則に関するルール
- **原則**: `.gemini/` ディレクトリ内で `.md` ファイルを生成またはリネームする場合、ファイル名が日本語でない限り、必ず **ケバブケース (`kebab-case`)** を使用すること。
- **理由**: プロジェクトの命名規則の一貫性を保ち、ユーザーの混乱を避けるため。日本語ファイル名の場合は、ユーザーの意図を尊重し、リネームしない。
- **禁止事項**: スネークケース (`snake_case`) やパスカルケース (`PascalCase`) など、他の命名規則を混在させてはならない。

## 4. コードコメントに関するルール
- **原則**: コードにコメントを追加する際は、以下の基準を厳守すること。
  - コメントは処理の「Why（なぜ）」を説明し、「What（何を）」は避ける。
  - 複雑なロジックや非直感的な実装の理由が明確になるようにする。
  - 原則1行の簡潔なコメントとし、冗長な説明を避ける。
  - コードで表現できない補足のみを追加し、過剰なコメントを避ける。
  - 別のエンジニアが処理の意図を誤解しないような箇所に限定する。
