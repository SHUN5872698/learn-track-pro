# Workflow: add-comments

このプロンプトは、コードに意図を説明するコメントを自動的に追加する `workflow:add-comments` の実行をガイドします。

## パラメータ:
- `file_path`: 処理するファイルのパスを指定します。複数ファイルは現在サポートしていません。

## ステップ:

1. **引数の解析**: ユーザーのリクエストから `file_path` を抽出します。
2. **ファイルの読み込み**: 指定された `file_path` の内容を読み込みます。
3. **拡張子の判定**: `file_path` から拡張子を判定し、対応する追加ルールを選択します。
4. **コメントの追加**: コードの構造と処理内容を解析し、以下の基準に基づいてコメントを生成・追加します。

## コメント基準（全言語共通）:

- コメントは処理の「Why（なぜ）」を説明し、「What（何を）」は避ける。
- **後で見返したときに意図がすぐ分かる**レベルの詳細さを保つ。
- 複雑なロジックや非直感的な実装の理由が明確になるようにする。
- 原則1〜2行の簡潔なコメントとし、複雑なロジックは2〜3行まで許容する。
- コードで表現できない補足のみを追加し、過剰なコメントを避ける。
- 別のエンジニアが処理の意図を誤解しないような箇所に限定する。

### コメントを残すポイント:
1. **ビジネスルール** - なぜこの条件チェック・制約が必要か
2. **データ整合性・トランザクション** - なぜここで更新・同期するか、何の整合性を保証するか
3. **パフォーマンス最適化** - なぜこの方法・実装を選んだか
4. **認可・権限制御** - 誰の何を防止するか
5. **非直感的な実装** - なぜこの複雑な処理が必要か

### コメント不要な箇所:
- 変数名やメソッド名で明らかな処理
- 単純なCRUD操作やデータ取得
- フレームワークの標準的な使い方

## 言語別追加ルール:

### PHP（`.php`）:
- **PHPDocは必ず保持**: すべてのメソッドの`@param`、`@return`、説明文を残す
- クラスレベルのPHPDocも保持する

### Vue（`.vue`）:
- ライフサイクルフックには「なぜこのタイミングか」を追記
- リアクティブ設計（ref/reactiveの使い分け）の理由を追記

### JavaScript/TypeScript（`.js`, `.ts`）:
- 重要な関数にはJSDocを保持
- TypeScript使用時は型で説明できる内容はコメント不要

5. **ファイルの出力**: コメント追加後のファイルを上書き保存します。
